// author: Samuel Mueller 
// homepage: http://github.com/ssmm/angular-table 
// version: 0.0.1 
!function(){angular.module("angular-table",[]),angular.module("angular-table").service("attributeExtractor",function(){return{extractWidth:function(t){var e;return e=/([0-9]+px)/i.exec(t),e?e[0]:""},isSortable:function(t){var e;return e=/(sortable)/i.exec(t),e?!0:!1},extractTitle:function(t){return t.attr("title")||t.attr("attribute")},extractAttribute:function(t){return t.attr("attribute")}}}),angular.module("angular-table").directive("atTable",["attributeExtractor",function(t){var e,r,a;return e=function(t){return t.charAt(0).toUpperCase()+t.slice(1)},r=function(r){var a,n,i,u,l,c,o,g,s,f,d,p,m,P,h,b;if(g=r.find("thead"),g[0]){for(f=g.find("tr"),n={},b=f.find("th"),p=0,P=b.length;P>p;p++)o=b[p],o=angular.element(o),n[o.attr("attribute")]=o.html();for(f.remove(),f=$("<tr></tr>"),c=r.find("td"),m=0,h=c.length;h>m;m++)l=c[m],l=angular.element(l),a=t.extractAttribute(l),o=$("<th style='cursor: pointer; -webkit-user-select: none;'></th>"),s=n[a]||e(t.extractTitle(l)),o.html(""+s),u=l[0].attributes.sortable||t.isSortable(l.attr("class")),u&&(o.attr("ng-click","predicate = '"+a+"'; descending = !descending;"),i=angular.element("<i style='margin-left: 10px;'></i>"),i.attr("ng-class","getSortIcon('"+a+"')"),o.append(i)),d=t.extractWidth(l.attr("class")),o.attr("width",d),f.append(o);return g.append(f)}},a=function(t){if(t.pagination&&t.list)throw"You can not specify a list if you have specified a pagination. The list defined for the pagnination will automatically be used.";if(!t.pagination&&!t.list)throw"Either a list or pagination must be specified."},{restrict:"AC",scope:!0,compile:function(t,e){var n,i,u,l,c;return a(e),r(t),u=e.pagination,n="",u&&(n="| limitTo:fromPage() | limitTo:toPage()"),i=e.list||""+u+".list",l=t.find("tbody"),c=l.find("tr"),c.attr("ng-repeat","item in "+i+" "+n+" | orderBy:predicate:descending"),{post:function(t){return t.getSortIcon=function(e){return e!==t.predicate?"icon-minus":t.descending?"icon-chevron-down":"icon-chevron-up"},t.fromPage=function(){return t[u]?t[u].fromPage():void 0},t.toPage=function(){return t[u]?t[u].itemsPerPage:void 0}}}}}}]),angular.module("angular-table").directive("atImplicit",["attributeExtractor",function(t){return{restrict:"AC",compile:function(e){var r;return r=t.extractAttribute(e),e.append("{{item."+r+"}}")}}}]),angular.module("angular-table").directive("atPagination",["attributeExtractor",function(){return{replace:!0,restrict:"E",template:"      <div class='pagination' style='margin: 0px;'>        <ul>          <li ng-class='{disabled: currentPage <= 0}'>            <a href='' ng-click='goToPage(currentPage - 1)'>&laquo;</a>          </li>          <li ng-class='{active: currentPage == page}' ng-repeat='page in pages'>            <a href='' ng-click='goToPage(page)'>{{page + 1}}</a>          </li>          <li ng-class='{disabled: currentPage >= numberOfPages - 1}'>            <a href='' ng-click='goToPage(currentPage + 1); normalize()'>&raquo;</a>          </li>        </ul>      </div>",scope:{itemsPerPage:"@",instance:"=",list:"="},link:function(t){return t.instance=t,t.currentPage=0,t.update=function(){var e;return t.currentPage=0,t.list?(t.list.length>0?(t.numberOfPages=Math.ceil(t.list.length/t.itemsPerPage),t.pages=function(){var r,a,n;for(n=[],e=r=0,a=t.numberOfPages-1;a>=0?a>=r:r>=a;e=a>=0?++r:--r)n.push(e);return n}()):(t.numberOfPages=0,t.pages=[]),t.list=t.list):void 0},t.fromPage=function(){return t.list?t.itemsPerPage*t.currentPage-t.list.length:void 0},t.getFillerArray=function(){var e,r,a,n,i,u,l;if(t.currentPage===t.numberOfPages-1){if(r=t.list.length%t.itemsPerPage,0!==r){for(e=t.itemsPerPage-r-1,l=[],a=n=i=t.list.length,u=t.list.length+e;u>=i?u>=n:n>=u;a=u>=i?++n:--n)l.push(a);return l}return[]}},t.goToPage=function(e){return e=Math.max(0,e),e=Math.min(t.numberOfPages-1,e),t.currentPage=e},t.update(),t.$watch("list",function(){return t.update()})}}}])}.call(this);